A direct copy of d3noob's (https://github.com/d3noob) Sankey code from their example here (http://bl.ocks.org/d3noob/c9b90689c1438f57d649).  All credit goes to them.